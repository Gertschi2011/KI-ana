@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
	color-scheme: light;

	/* -------------------------------------------------
	 * KI_ana Playful Light Theme (Design System v1)
	 * ------------------------------------------------- */
	--kiana-gradient-primary: linear-gradient(135deg, #6EC3F4 0%, #7B8CFF 50%, #B57CFF 100%);
	--kiana-bg-main: #F6F8FF;
	--kiana-bg-soft: #EEF1FF;
	--kiana-text: #111827;
	--kiana-muted: rgba(17, 24, 39, 0.62);
	--kiana-card-bg: rgba(255,255,255,0.85);
	--kiana-card-border: rgba(123,140,255,0.15);
	--kiana-card-shadow: 0 12px 30px rgba(123,140,255,0.15);
	--kiana-card-shadow-hover: 0 18px 44px rgba(123,140,255,0.22);
	--kiana-radius-card: 22px;
	--kiana-radius-input: 16px;
	--kiana-radius-pill: 999px;
	--kiana-btn-primary-bg: var(--kiana-gradient-primary);
	--kiana-btn-secondary-bg: rgba(255,255,255,0.92);
	--kiana-focus: rgba(123,140,255,0.50);
	--kiana-danger: #DC2626;
	--kiana-success: #16A34A;

	/* Back-compat variables used across existing UI */
	--k-bg: var(--kiana-bg-main);
	--k-surface: rgba(255,255,255,0.92);
	--k-border: rgba(123,140,255,0.18);
	--k-text: var(--kiana-text);
	--k-muted: var(--kiana-muted);
	--k-primary: #7B8CFF;
	--k-accent: #6EC3F4;
	--k-success: var(--kiana-success);
	--k-danger: var(--kiana-danger);
	--k-gradient: var(--kiana-gradient-primary);

	--k-radius: var(--kiana-radius-card);
	--k-radius-btn: var(--kiana-radius-input);
	--k-radius-bubble: 18px;
	--k-shadow-card: var(--kiana-card-shadow);
	--k-shadow-btn: 0 10px 22px rgba(123,140,255,0.18);
}
html { height: 100%; }
html { scroll-behavior: smooth; }
body {
	@apply min-h-screen;
	background:
		radial-gradient(1000px 520px at 20% 5%, rgba(110,195,244,0.25), transparent 60%),
		radial-gradient(900px 420px at 85% 0%, rgba(181,124,255,0.20), transparent 55%),
		linear-gradient(180deg, var(--kiana-bg-main), var(--kiana-bg-soft));
	color: var(--k-text);
}

/* Phase 2b: no continuous decorative animations */
.kiana-float-slow { animation: none !important; }
.kiana-float-slower { animation: none !important; }

/* Landing playful shapes */
.kiana-hero-shapes {
	position: absolute;
	inset: -20px;
	pointer-events: none;
	z-index: 0;
}
.kiana-blob {
	position: absolute;
	border-radius: 999px;
	filter: blur(26px);
	opacity: 0.55;
	background:
		radial-gradient(circle at 30% 30%, rgba(110,195,244,0.85), rgba(123,140,255,0.0) 65%),
		radial-gradient(circle at 70% 40%, rgba(181,124,255,0.75), rgba(181,124,255,0.0) 60%);
}
.kiana-blob-a { width: 220px; height: 220px; left: -40px; top: 40px; }
.kiana-blob-b { width: 260px; height: 260px; right: -60px; top: -20px; opacity: 0.45; }
.kiana-blob-c { width: 180px; height: 180px; right: 20%; bottom: -40px; opacity: 0.35; }

/* Phase 2b: no continuous pulse badges */
.kiana-badge-pulse { animation: none !important; }

/* Accessible focus */
*:focus-visible {
	outline: 2px solid var(--kiana-focus);
	outline-offset: 2px;
}

/* Public landing header (glass) */
.public-header {
	@apply sticky top-0 z-50;
	background: rgba(255,255,255,0.72);
	border-bottom: 1px solid rgba(17,24,39,0.08);
	backdrop-filter: blur(10px);
	box-shadow: 0 10px 24px rgba(17,24,39,0.06);
}
.public-header-inner { @apply max-w-6xl mx-auto px-4; }
.public-header-row { @apply flex items-center justify-between gap-4 py-4; }
.public-brand { @apply flex items-center gap-3 font-semibold; color: var(--k-text); }
.public-brand-avatar {
	border-radius: 999px;
	border: 2px solid rgba(79,70,229,0.16);
	background: rgba(255,255,255,0.70);
}
.public-brand-text { @apply text-lg; }

.public-nav { @apply hidden md:flex items-center gap-6; }
.public-navlink {
	@apply text-sm font-medium px-2 py-2 rounded-lg transition-colors;
	color: rgba(17,24,39,0.78);
	background: transparent;
}
.public-navlink:hover { background: rgba(79,70,229,0.06); color: rgba(17,24,39,0.92); }

.public-cta { @apply flex items-center gap-2; }

/* Navbar */
.kiana-header {
	@apply sticky top-0 z-50;
	background: rgba(255,255,255,0.72);
	color: var(--kiana-text);
	border-bottom: 1px solid rgba(123,140,255,0.18);
	backdrop-filter: blur(12px);
	box-shadow: 0 10px 24px rgba(123,140,255,0.10);
}
.kiana-header-inner { @apply max-w-6xl mx-auto px-4 py-4; }
.kiana-header-row { @apply flex items-center justify-between gap-4; }
.kiana-brand-link { @apply flex items-center gap-3; text-decoration: none; position: relative; }
.kiana-brand-link::after {
	content: "";
	position: absolute;
	left: -24px;
	top: -18px;
	width: 120px;
	height: 64px;
	background: linear-gradient(110deg, transparent 0%, rgba(255,255,255,0.0) 35%, rgba(255,255,255,0.55) 50%, rgba(255,255,255,0.0) 65%, transparent 100%);
	transform: translateX(-40px) rotate(8deg);
	opacity: 0;
	pointer-events: none;
	transition: transform 600ms ease, opacity 260ms ease;
}
.kiana-brand-link:hover::after {
	opacity: 0.9;
	transform: translateX(64px) rotate(8deg);
}
.kiana-brand-mark {
	width: 34px;
	height: 34px;
	border-radius: 999px;
	background: var(--kiana-gradient-primary);
	box-shadow: 0 14px 30px rgba(123,140,255,0.22);
	position: relative;
}
.kiana-brand-mark::after {
	content: "";
	position: absolute;
	top: 9px;
	left: 9px;
	width: 8px;
	height: 8px;
	border-radius: 999px;
	background: rgba(255,255,255,0.85);
	filter: blur(0.2px);
}
.kiana-brand-title { @apply text-xl md:text-2xl font-extrabold; letter-spacing: -0.02em; }
.kiana-brand-sub { @apply mt-0.5 text-xs; color: rgba(17,24,39,0.55); }

.kiana-status { @apply text-right; }
.kiana-status-label { @apply text-xs; color: rgba(17,24,39,0.60); }
.kiana-status-line { @apply flex items-center justify-end gap-2; }

.kiana-header-status-dot {
	width: 12px;
	height: 12px;
	border-radius: 999px;
	background: #4ADE80; /* green-400 */
	box-shadow: 0 0 0 6px rgba(74,222,128,0.16);
}
.kiana-status-text { @apply font-semibold; }

.kiana-navtabs {
	@apply border-b;
	border-color: rgba(123,140,255,0.14);
	background: rgba(255,255,255,0.55);
	backdrop-filter: blur(10px);
}
.kiana-navtabs-inner { @apply max-w-6xl mx-auto px-4; }
.kiana-navtabs-list { @apply flex items-center gap-2 flex-wrap py-3; }
.kiana-tab {
	@apply relative px-3 py-2 font-semibold text-sm transition-colors;
	border-radius: var(--kiana-radius-pill);
	color: rgba(17,24,39,0.78);
	background: transparent;
}
.kiana-tab::after {
	content: "";
	position: absolute;
	left: 12px;
	right: 12px;
	bottom: 7px;
	height: 2px;
	border-radius: 999px;
	background: linear-gradient(90deg, rgba(110,195,244,0.0), rgba(123,140,255,0.85), rgba(181,124,255,0.0));
	transform: scaleX(0);
	transform-origin: left;
	transition: transform 220ms ease;
	opacity: 0.9;
}
.kiana-tab:hover {
	background: linear-gradient(135deg, rgba(110,195,244,0.14), rgba(123,140,255,0.10), rgba(181,124,255,0.12));
	color: rgba(17,24,39,0.92);
	box-shadow: 0 12px 26px rgba(123,140,255,0.16);
}
.kiana-tab:hover::after { transform: scaleX(1); }
.kiana-tab-active { color: rgba(17,24,39,0.96); }

.kiana-tab-active-pill {
	position: absolute;
	inset: 0;
	border-radius: var(--kiana-radius-pill);
	background: rgba(123,140,255,0.14);
	border: 1px solid rgba(123,140,255,0.20);
	box-shadow: 0 12px 26px rgba(123,140,255,0.10);
	pointer-events: none;
}

.kiana-header-actions { @apply flex items-center gap-3; }
.kiana-userpill {
	@apply text-sm;
	color: rgba(17,24,39,0.78);
}
.kiana-header-btn {
	@apply inline-flex items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors;
	border-radius: var(--kiana-radius-pill);
	border: 1px solid rgba(123,140,255,0.18);
	background: rgba(255,255,255,0.72);
	color: rgba(17,24,39,0.88);
}
.kiana-header-btn:hover { background: rgba(123,140,255,0.10); box-shadow: 0 10px 22px rgba(123,140,255,0.10); }

/* Inset blocks inside a single main KianaCard */
.kiana-inset {
	border-radius: 18px;
	background: rgba(255,255,255,0.72);
	border: 1px solid rgba(17,24,39,0.08);
	box-shadow: 0 10px 24px rgba(123,140,255,0.10);
	padding: 16px;
}

.kiana-progress {
	height: 10px;
	border-radius: 999px;
	background: rgba(123,140,255,0.12);
	overflow: hidden;
}
.kiana-progress-bar {
	height: 100%;
	border-radius: 999px;
	background: linear-gradient(90deg, rgba(110,195,244,0.9), rgba(123,140,255,0.9), rgba(181,124,255,0.9));
	box-shadow: 0 10px 18px rgba(123,140,255,0.20);
}

/* Cards & forms */
.card {
	@apply p-4 md:p-6;
	background: var(--kiana-card-bg);
	border: 1px solid var(--kiana-card-border);
	border-radius: var(--kiana-radius-card);
	box-shadow: var(--kiana-card-shadow);
	backdrop-filter: blur(10px);
}
.input {
	@apply w-full px-3 py-2;
	background: rgba(255,255,255,0.92);
	border: 1px solid rgba(123,140,255,0.22);
	border-radius: var(--kiana-radius-input);
	box-shadow: 0 8px 18px rgba(123,140,255,0.08);
	transition: box-shadow 160ms ease, border-color 160ms ease;
}
.input:focus {
	border-color: rgba(123,140,255,0.42);
	box-shadow: 0 0 0 4px rgba(123,140,255,0.16), 0 10px 22px rgba(123,140,255,0.10);
}
.form { @apply grid gap-3 max-w-full md:max-w-md; }
.small { @apply text-sm; color: var(--k-muted); }

/* Design-system primitives (new) */
.kiana-card {
	@apply p-4 md:p-6;
	background: var(--kiana-card-bg);
	border: 1px solid var(--kiana-card-border);
	border-radius: var(--kiana-radius-card);
	box-shadow: var(--kiana-card-shadow);
	backdrop-filter: blur(10px);
}

.kiana-section-title {
	@apply text-3xl md:text-4xl font-extrabold;
	letter-spacing: -0.02em;
}
.kiana-section-subtitle {
	@apply mt-2 text-base;
	color: var(--kiana-muted);
}

.kiana-btn2 {
	@apply inline-flex items-center justify-center gap-2 px-4 py-2.5 font-semibold;
	border-radius: var(--kiana-radius-pill);
	transition: transform 120ms ease, box-shadow 160ms ease, background 160ms ease;
}
.kiana-btn2:disabled { opacity: 0.55; cursor: not-allowed; }
.kiana-btn2-primary {
	@apply text-white;
	background: var(--kiana-btn-primary-bg);
	box-shadow: 0 12px 26px rgba(123,140,255,0.22);
}
.kiana-btn2-primary:hover { box-shadow: 0 12px 26px rgba(123,140,255,0.22); }
.kiana-btn2-secondary {
	color: var(--kiana-text);
	background: var(--kiana-btn-secondary-bg);
	border: 1px solid rgba(123,140,255,0.20);
	box-shadow: 0 10px 22px rgba(123,140,255,0.10);
}
.kiana-btn2-secondary:hover { box-shadow: 0 14px 30px rgba(123,140,255,0.16); }
.kiana-btn2-ghost {
	background: transparent;
	color: rgba(17,24,39,0.78);
}
.kiana-btn2-ghost:hover { background: rgba(123,140,255,0.08); }

/* Kiana buttons */
.kiana-btn {
	@apply inline-flex items-center justify-center gap-2 px-3 py-2 font-medium;
	border-radius: var(--k-radius-btn);
	border: 1px solid var(--k-border);
	background: var(--k-surface);
	color: var(--k-text);
	transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease, border-color 120ms ease;
}
.kiana-btn:hover { border-color: rgba(168,85,247,0.35); box-shadow: 0 6px 18px rgba(17,24,39,0.06); transform: scale(1.01); }
.kiana-btn:active { transform: scale(0.99); }
.kiana-btn-primary {
	@apply text-white;
	border: 0;
	background: var(--k-gradient);
	box-shadow: var(--k-shadow-btn);
}
.kiana-btn-primary:hover { }
.kiana-btn-ghost {
	background: transparent;
	border: 1px solid transparent;
	color: var(--k-muted);
}
.kiana-btn-ghost:hover { background: rgba(79,70,229,0.06); color: var(--k-text); border-color: rgba(79,70,229,0.10); }

/* Switch */
.kiana-switch { @apply inline-flex items-center gap-2 select-none; color: var(--k-muted); }
.kiana-switch input { accent-color: var(--k-primary); }

/* Chat bubbles */
.bubble { @apply inline-block px-4 py-2 rounded-2xl max-w-[80%]; }
.bubble-user { @apply bg-blue-500 text-white self-end; }
.bubble-bot { @apply bg-gray-200 text-gray-900 self-start; }

/* KI_ana stylish chat */

.kiana-chat {
	@apply overflow-hidden;
	background: var(--k-surface);
	border: 1px solid var(--k-border);
	border-radius: var(--k-radius);
	box-shadow: var(--k-shadow-card);
}
.kiana-chat-sidebar {
	background: rgba(255,255,255,0.86);
	border-right: 1px solid var(--k-border);
}
.kiana-chat-main {
	background:
		radial-gradient(900px 400px at 85% 10%, rgba(147,51,234,0.08), transparent 55%),
		radial-gradient(800px 360px at 25% 20%, rgba(37,99,235,0.07), transparent 55%),
		var(--k-bg);
}

.kiana-sidebar-brand { @apply flex items-center gap-2; }
.kiana-status-dot {
	width: 10px;
	height: 10px;
	border-radius: 999px;
	background: var(--k-success);
	box-shadow: 0 0 0 4px rgba(22,163,74,0.14);
}
.kiana-sidebar-title { @apply font-semibold; font-size: 16px; }
.kiana-sidebar-sub { @apply text-xs; color: var(--k-muted); }

.kiana-chat-header {
	@apply px-4 py-3 flex items-center gap-3;
	position: relative;
	background: var(--k-surface);
	border-bottom: 1px solid var(--k-border);
}
.kiana-chat-header::before {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 3px;
	background: var(--k-gradient);
}
.kiana-chat-avatar { @apply w-10 h-10 rounded-full object-cover; border: 2px solid rgba(79,70,229,0.20); }
.kiana-chat-title { @apply font-semibold leading-tight; font-size: 17px; }
.kiana-chat-sub { @apply text-xs; color: var(--k-muted); }

.kiana-chat-messages { @apply bg-transparent; }

.kiana-bubble {
	@apply inline-block px-4 py-3 max-w-[80%];
	border-radius: var(--k-radius-bubble);
	line-height: 1.55;
	border: 1px solid var(--k-border);
}
.kiana-bubble-user {
	background: linear-gradient(135deg, rgba(147,51,234,0.92) 0%, rgba(37,99,235,0.82) 100%);
	border-color: rgba(255,255,255,0.20);
	color: #fff;
}
.kiana-bubble-ai {
	background: var(--k-surface);
	border-color: var(--k-border);
	color: var(--k-text);
}

.kiana-bubble-meta { @apply mt-2 flex items-center justify-between gap-2 text-[11px] opacity-80; }
.kiana-bubble-time { @apply select-none; }
.kiana-explain-btn {
	@apply inline-flex items-center justify-center w-7 h-7;
	border-radius: 999px;
	border: 1px solid rgba(17,24,39,0.10);
	color: rgba(17,24,39,0.85);
	background: rgba(17,24,39,0.03);
	pointer-events: auto;
	cursor: pointer;
	z-index: 5;
}
.kiana-explain-btn:hover { border-color: rgba(168,85,247,0.30); background: rgba(168,85,247,0.08); }

.kiana-explain { @apply mt-2 rounded-lg p-3 bg-white/70 dark:bg-gray-900/60 border border-gray-200 dark:border-gray-800; }

.kiana-explain-details { @apply relative; }
.kiana-explain-summary {
	list-style: none;
	cursor: pointer;
	user-select: none;
	@apply inline-flex items-center justify-center w-6 h-6 rounded-full;
}
.kiana-explain-details > summary::-webkit-details-marker { display: none; }
.kiana-bubble-user .kiana-explain-summary { color: rgba(255,255,255,0.95); background: rgba(255,255,255,0.18); border: 1px solid rgba(255,255,255,0.22); }
.kiana-bubble-ai .kiana-explain-summary { color: rgba(17,24,39,0.9); background: rgba(0,0,0,0.05); border: 1px solid rgba(0,0,0,0.10); }

.kiana-chat-composer { background: rgba(255,255,255,0.90); }
.kiana-composer-input {
	@apply w-full px-4 py-3;
	border-radius: 999px;
	border: 1px solid rgba(123,140,255,0.22);
	background: rgba(255,255,255,0.92);
	box-shadow: 0 10px 22px rgba(123,140,255,0.10);
}
.kiana-composer-send {
	@apply px-5 py-3 rounded-full font-semibold text-white disabled:opacity-60;
	background: var(--kiana-gradient-primary);
	box-shadow: var(--k-shadow-btn);
}
.kiana-composer-send:hover { box-shadow: var(--k-shadow-btn); }

/* Chat sidebar items */
.kiana-sidebar-item {
	@apply w-full text-left px-3 py-2 rounded-full;
	transition: background 160ms ease, box-shadow 160ms ease, transform 120ms ease;
}
.kiana-sidebar-item:hover { background: rgba(123,140,255,0.10); transform: scale(1.01); }
.kiana-sidebar-item:active { transform: scale(0.99); }
.kiana-sidebar-item-active {
	background: rgba(123,140,255,0.14);
	border: 1px solid rgba(123,140,255,0.18);
	box-shadow: 0 14px 30px rgba(123,140,255,0.14);
}

@media (prefers-reduced-motion: reduce) {
	.kiana-btn:hover,
	.kiana-btn:active,
	.kiana-sidebar-item:hover,
	.kiana-sidebar-item:active {
		transform: none !important;
	}
}

/* Modal */
.kiana-modal {
	@apply relative w-full max-w-3xl;
	max-height: 80vh;
	overflow: auto;
	background: var(--k-surface);
	border: 1px solid var(--k-border);
	border-radius: var(--k-radius);
	box-shadow: var(--k-shadow-card);
}

/* Alerts */
.kiana-alert {
	@apply rounded-xl border p-4;
	border-color: var(--k-border);
	background: rgba(255,255,255,0.70);
}
.kiana-alert-error {
	border-color: rgba(220,38,38,0.25);
	background: rgba(220,38,38,0.06);
	color: var(--k-danger);
}
.kiana-alert-success {
	border-color: rgba(22,163,74,0.25);
	background: rgba(22,163,74,0.06);
	color: var(--k-success);
}

/* Tables (Admin) */
.kiana-table {
	@apply w-full text-sm;
}
.kiana-table th {
	@apply text-left py-3 px-2 md:px-3;
	color: var(--k-muted);
	font-weight: 600;
}
.kiana-table td {
	@apply py-3 px-2 md:px-3;
}
.kiana-table thead tr {
	border-bottom: 1px solid var(--k-border);
}
.kiana-table tbody tr {
	border-bottom: 1px solid rgba(229,231,235,0.6);
}
.kiana-table tbody tr:hover {
	background: rgba(147,51,234,0.04);
}
