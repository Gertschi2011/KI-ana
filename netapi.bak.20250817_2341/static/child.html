<!doctype html>
<html lang="de">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>KI_ana â€“ Kinderbereich</title>
<link rel="stylesheet" href="/static/style.css">
<style>
  .wrap{max-width:840px;margin:20px auto;padding:0 16px}
  .messages{background:#101735;border:1px solid #223062;border-radius:16px;padding:12px;min-height:260px;max-height:480px;overflow:auto}
  .bubble{max-width:75%;padding:10px 12px;border-radius:12px;margin:8px 0}
  .me{margin-left:auto;background:#2342a0}.bot{margin-right:auto;background:#1a2550}
  .row{display:flex;gap:10px;margin-top:10px}
  input,button{padding:12px;border-radius:10px;border:1px solid #2c3d74;background:#0f1530;color:#e8edf7}
  input{flex:1} button{cursor:pointer;background:linear-gradient(180deg,#1a2760,#132051)}
</style>
</head>
<body>
<header class="hero"><div class="hero-left">
  <img src="/static/Avatar_KI_ana.jpg" class="avatar" alt="KI_ana">
  <div><h1>Hallo! Ich bin <strong>KI_ana</strong> ðŸ‘‹</h1><p class="lead">Hier ist der sichere Kinderbereich.</p></div>
</div></header>
<main class="wrap">
  <div class="messages" id="chat"></div>
  <div class="row"><input id="m" placeholder="Frag mich etwas â€¦"><button id="s">Senden</button></div>
</main>
<script>
const chat = document.getElementById('chat');
function add(role, t){ const b=document.createElement('div'); b.className='bubble '+(role==='me'?'me':'bot'); b.textContent=t; chat.appendChild(b); chat.scrollTop=chat.scrollHeight; }
async function send(){
  const i=document.getElementById('m'); const t=i.value.trim(); if(!t) return; i.value=''; add('me',t);
  const r = await fetch('/chat',{method:'POST',credentials:'include',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:t})});
  if(!r.ok){ add('bot','Ich brauche ein Login.'); return; }
  const d = await r.json(); let reply=d.reply||'(keine Antwort)'; if(d.topic){ reply+=`\\n\\nâ€” [${d.action}] ${d.topic}`; } add('bot', reply);
}
document.getElementById('s').onclick=send; document.getElementById('m').addEventListener('keydown',e=>{if(e.key==='Enter'){e.preventDefault();send();}});
</script>
</body></html>
